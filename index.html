<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JBL Cinema System Design</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        #cinema-room {
            margin-top: 20px;
            position: relative;
            background-color: #fff;
            border: 1px solid #ccc;
        }
        .speaker {
            width: 10px;
            height: 10px;
            background-color: rgb(132, 217, 230);
            position: absolute;
        }
        .rlp {
            width: 25px;
            height: 25px;
            background-color: rgb(111, 111, 142);
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }
        .lcr {
            width: 20px;
            height: 20px;
            background-color: green;
            position: absolute;
        }
        .dimension {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 2px 5px;
            border: 1px solid #ccc;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>JBL Cinema System Design</h1>
    <form id="cinema-form">
        <label for="length">Length (m):</label>
        <input type="number" id="length" name="length" step="0.1" required><br><br>
        <label for="width">Width (m):</label>
        <input type="number" id="width" name="width" step="0.1" required><br><br>
        <label for="height">Height (m):</label>
        <input type="number" id="height" name="height" step="0.1" required><br><br>
        <label for="surround-spacing">Surround Spacing (m):</label>
        <input type="number" id="surround-spacing" name="surround-spacing" step="0.1" value="2" required><br><br>
        <button type="button" onclick="calculateDesign()">Calculate</button>
    </form>
    <div id="cinema-room"></div>
    <div id="dimensions"></div>
    <script>
        function calculateDesign() {
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            const height = parseFloat(document.getElementById('height').value);
            const surroundSpacing = parseFloat(document.getElementById('surround-spacing').value);
            
            if (!length || !width || !height || !surroundSpacing) {
                alert("Please enter all dimensions and spacing.");
                return;
            }
            
            const room = document.getElementById('cinema-room');
            const dimensions = document.getElementById('dimensions');
            room.innerHTML = '';
            dimensions.innerHTML = '';
            room.style.width = width * 50 + 'px';
            room.style.height = length * 50 + 'px';
            
            // Add room dimensions outside the rectangle
            const lengthDim = document.createElement('div');
            lengthDim.classList.add('dimension');
            lengthDim.style.left = (width * 50 / 2 - 50) + 'px';
            lengthDim.style.top = (length * 50 + 10) + 'px';
            lengthDim.innerText = `Length: ${length} m`;
            dimensions.appendChild(lengthDim);

            const widthDim = document.createElement('div');
            widthDim.classList.add('dimension');
            widthDim.style.left = (width * 50 + 10) + 'px';
            widthDim.style.top = (length * 50 / 2 - 10) + 'px';
            widthDim.innerText = `Width: ${width} m`;
            dimensions.appendChild(widthDim);

            // Calculate RLP
            const rlpX = width / 2 * 50;
            const rlpY = (2 / 3 * length) * 50;
            
            const rlp = document.createElement('div');
            rlp.classList.add('rlp');
            rlp.style.left = rlpX - 12.5 + 'px';
            rlp.style.top = rlpY - 12.5 + 'px';
            rlp.innerText = 'RLP';
            room.appendChild(rlp);
            
            // Calculate and place LCR speakers
            const lcrPositions = [
                { left: 0, top: 0 },
                { left: (width / 2) * 50 - 10, top: 0 },
                { left: (width - 1) * 50, top: 0 }
            ];
            lcrPositions.forEach((pos, index) => {
                const speaker = document.createElement('div');
                speaker.classList.add('lcr');
                speaker.style.left = pos.left + 'px';
                speaker.style.top = pos.top + 'px';
                speaker.innerText = index === 0 ? 'L' : (index === 1 ? 'C' : 'R');
                room.appendChild(speaker);
            });
            
            // Calculate number of side speakers
            const numSideSpeakers = Math.max(Math.round((2 / 3 * length) / surroundSpacing), 1);
            const sideSpacing = surroundSpacing * 50; // Convert spacing to pixels
            
            // Place side speakers starting at 1/3 the length of the room from the screen
            for (let i = 0; i < numSideSpeakers; i++) {
                const speakerLeft = document.createElement('div');
                speakerLeft.classList.add('speaker');
                speakerLeft.style.left = '0px';
                speakerLeft.style.top = (length / 3 * 50) + i * sideSpacing - 5 + 'px';
                room.appendChild(speakerLeft);
                
                const speakerRight = document.createElement('div');
                speakerRight.classList.add('speaker');
                speakerRight.style.left = width * 50 - 10 + 'px';
                speakerRight.style.top = (length / 3 * 50) + i * sideSpacing - 5 + 'px';
                room.appendChild(speakerRight);
                
                // Add dimensions for first side speakers
                if (i === 0) {
                    const leftSpeakerDim = document.createElement('div');
                    leftSpeakerDim.classList.add('dimension');
                    leftSpeakerDim.style.left = '0px';
                    leftSpeakerDim.style.top = (length / 3 * 50) - 15 + 'px';
                    leftSpeakerDim.innerText = `${(length / 3).toFixed(1)} m`;
                    room.appendChild(leftSpeakerDim);
                    
                    const rightSpeakerDim = document.createElement('div');
                    rightSpeakerDim.classList.add('dimension');
                    rightSpeakerDim.style.left = (width * 50 - 50) + 'px';
                    rightSpeakerDim.style.top = (length / 3 * 50) - 15 + 'px';
                    rightSpeakerDim.innerText = `${(length / 3).toFixed(1)} m`;
                    room.appendChild(rightSpeakerDim);
                }
            }
            
            // Calculate number of rear speakers
            const numRearSpeakers = Math.max(Math.round((2 / 3 * width) / surroundSpacing) - 1, 4);
            const rearSpacing = width * 50 / (numRearSpeakers + 1);
            
            // Place rear speakers
            for (let i = 1; i <= numRearSpeakers; i++) {
                const speakerRear = document.createElement('div');
                speakerRear.classList.add('speaker');
                speakerRear.style.left = i * rearSpacing - 5 + 'px';
                speakerRear.style.top = length * 50 - 10 + 'px';
                room.appendChild(speakerRear);
                
                // Add dimensions for first rear speaker
                if (i === 1) {
                    const rearSpeakerDim = document.createElement('div');
                    rearSpeakerDim.classList.add('dimension');
                    rearSpeakerDim.style.left = i * rearSpacing - 15 + 'px';
                    rearSpeakerDim.style.top = (length * 50 - 30) + 'px';
                    rearSpeakerDim.innerText = `${(width / (numRearSpeakers + 1)).toFixed(1)} m`;
                    room.appendChild(rearSpeakerDim);
                }
            }
        }
    </script>
</body>
</html>
